!function(e,t){var n=function(){function e(e){this.items=e||[]}return e.prototype={actionOnAll:function(e){for(var t=0;t<this.items.length;t++)e(this.items[t])},getArr:function(){return this.items},add:function(e){this.items.push(e)},remove:function(e){var t=this.items.indexOf(e);-1!==t&&this.items.splice(t,1)},find:function(e,t){for(var n=this.items,i=n.length,r=[],o=0;o<i;o++)e(n[o])&&r.push(n[o]);return t&&t.call(this,r),r},addToStart:function(e){this.items=[e].concat(this.items)}},e}();n.create=function(){return new n},e.List=n}(window,document),function(e){var t=function(){function e(e,t,n,i){this.id=n,this.alias=i,this.center=e,this.leftBot=t[0],this.rightBot=t[1],this.rightTop=t[2],this.leftTop=t[3]}return e.prototype={getPath:function(){return[this.leftBot,this.rightBot,this.rightTop,this.leftTop]},gsId:function(e){return e?this.id=e:this.id},gsAlias:function(e){return e?this.alias=e:this.alias},toObj:function(){return{id:this.id,alias:this.alias||"",center:this.center,leftBot:this.leftBot,rightBot:this.rightBot,rightTop:this.rightTop,leftTop:this.leftTop}}},e}();t.create=function(){return new t},e.Rect=t}(window),function(e){var t=function(){function e(e,t,n,i,r,o){this.center=e,this.latDiff=t,this.lngDiff=n,this.polies=i,this.size=r,this.rects=o||List.create()}return e.prototype={_createRect:function(e,t){var n={lat:e.lat-this.latDiff,lng:e.lng-this.lngDiff},i={lat:e.lat-this.latDiff,lng:e.lng+this.lngDiff},r={lat:e.lat+this.latDiff,lng:e.lng+this.lngDiff},o={lat:e.lat+this.latDiff,lng:e.lng-this.lngDiff};return new Rect(e,[n,i,r,o],t)},_contains:function(e,t){return google.maps.geometry.poly.containsLocation(new google.maps.LatLng(e,t),new google.maps.Polygon({paths:this.polies.getArr()}))},_createRectsWithinLat:function(e){var t=List.create(),n=2;this.polies.getArr();if(!this._contains(e.lat,e.lng))return t;for(t.add(this._createRect(e));this._contains(e.lat+this.latDiff*n,e.lng);)t.add(this._createRect({lat:e.lat+this.latDiff*n,lng:e.lng})),n+=2;for(n=2;this._contains(e.lat-this.latDiff*n,e.lng);)t.addToStart(this._createRect({lat:e.lat-this.latDiff*n,lng:e.lng})),n+=2;return t},createGrid:function(){var e=2,t=List.create();this.polies.getArr();for(t.add(this._createRectsWithinLat({lat:this.center.lat,lng:this.center.lng}));this._contains(this.center.lat,this.center.lng+this.lngDiff*e);){var n=this._createRectsWithinLat({lat:this.center.lat,lng:this.center.lng+this.lngDiff*e});t.add(n),e+=2}for(e=2;this._contains(this.center.lat,this.center.lng-this.lngDiff*e);){n=this._createRectsWithinLat({lat:this.center.lat,lng:this.center.lng-this.lngDiff*e});t.addToStart(n),e+=2}return this.rects=t,this._setupIds(),console.log(t),t},_setupIds:function(){var e=0;this.rects.actionOnAll(function(t){t&&t.actionOnAll(function(t){t.gsId(++e)})})},findZone:function(e){var t=void 0;return this.rects.find(function(t){var n=t.getArr()[0];if(e.lng<=n.rightBot.lng&&e.lng>=n.leftBot.lng)return!0}).forEach(function(n){n.find(function(n){if(e.lat<=n.rightTop.lat&&e.lat>=n.leftBot.lat)return t=n})}),t},getArr:function(){return this.rects},applyActionSep:function(e){this.rects.actionOnAll(function(t){t.actionOnAll(function(t){e(t)})})},setRects:function(e){this.rects=e}},e}();t.create=function(){return new t},e.PolyHandler=t}(window),function(e){var t=function(){function e(e,t,n){this.polyHandlerS=e,this.polyHandlerM=t,this.polyHandlerL=n,this.gs="",this.gm="",this.gl=""}return e.prototype={setId:function(e){this.id=e},createId:function(){var e=this;fetch("/generator/create-grid",{method:"POST"}).then(function(t){t.ok&&t.json().then(function(t){e.setId(t._id)})})},storeInDatabase:async function(e,t,n,i){if(void 0===n&&void 0===i&&void 0===t){var r,o=new URLSearchParams;o.append("data",JSON.stringify(this.polyHandlerS.polies));var a,s=await fetch("/generator/create-poly",{method:"POST",body:o});if(s.ok&&(r=await s.json()),(o=new URLSearchParams).append("name",e),o.append("polyref",r),!(s=await fetch("/generator/create-city",{method:"POST",body:o})).ok)return!1;a=await s.json(),document.body.innerHTML=JSON.stringify(a)}void 0!==t&&this._fillGrid(this.polyHandlerS,t),void 0!==n&&this._fillGrid(this.polyHandlerM,n),void 0!==i&&this._fillGrid(this.polyHandlerL,i),console.log("SUCCESS")},_fillGrid:async function(e,t){var n=-1;return e.getArr().getArr().forEach(async function(e){n++;var i=new URLSearchParams;i.append("data",JSON.stringify(e.getArr()));await fetch("/generator/create-grid-lat/"+t+"/"+n,{method:"POST",body:i})}),!0},_fillFullGrid:async function(e,t){var n=[];e.getArr().getArr().forEach(async function(e){n.push(e.getArr())});var i=new URLSearchParams;i.append("data",JSON.stringify(n));await fetch("/generator/create-full-grid/"+t,{method:"POST",body:i})},retrieveFromDatabase:function(e,t){var n=this;fetch("/generator/get-grid/"+(e||this.id),{method:"POST"}).then(function(e){e.ok?e.json().then(function(e){var i=new List;e.coords.forEach(function(e){i.add(new List(e))}),n.polyHandler.setRects(i),t&&t()}):console.log("ERROR")})},drawAll:function(e){var t=0;this.polyHandler.getArr().getArr().forEach(function(n){n.getArr().forEach(function(n){e.addPoly(new Rect(n.center,[n.leftBot,n.rightBot,n.rightTop,n.leftTop],++t).getPath())})})}},e}();t.create=function(){return new t},e.CityMap=t}(window),function(e){e.mapStyle1=[{featureType:"all",elementType:"geometry",stylers:[{color:"#202c3e"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{gamma:.01},{lightness:20},{weight:"1.39"},{color:"#ffffff"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{weight:"0.96"},{saturation:"9"},{visibility:"on"},{color:"#000000"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:30},{saturation:"9"},{color:"#29446b"}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:20}]},{featureType:"poi.park",elementType:"geometry",stylers:[{lightness:20},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:10},{saturation:-30}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#193a55"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{saturation:25},{lightness:25},{weight:"0.01"}]},{featureType:"water",elementType:"all",stylers:[{lightness:-20}]}],e.mapStyle2=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}]}(window),function(e,t,n,i){var r=function(){function e(e,t){this.gMap=new n.maps.Map(e,t),this.markers=i.create()}return e.prototype={zoom:function(e){if(!e)return this.gMap.getZoom();this.gMap.setZoom(e)},_on:function(e){var t=this;n.maps.event.addListener(e.obj,e.event,function(n){e.callback.call(t,n)})},addMarker:function(e){var t;return e.position={lat:e.lat,lng:e.lng},t=this._createMarker(e),this.markers.add(t),e.event&&this._on({obj:t,event:e.event.name,callback:e.event.callback}),e.content&&this._on({obj:t,event:"click",callback:function(i){new n.maps.InfoWindow({content:e.content}).open(this.gMap,t)}}),t},findBy:function(e){return this.markers.find(e)},removeBy:function(e){var t=this;this.markers.find(e,function(e){e.forEach(function(e){e.setMap(null),t.markers.remove(e)})})},addListener:function(e,t){this.gMap.addListener(e,function(e){alert("Hi"),t(e)})},_createMarker:function(e){return e.map=this.gMap,new n.maps.Marker(e)},addPoly:function(e,t){var i=new n.maps.Polygon({paths:e,strokeColor:"#ecf0f1",strokeOpacity:.8,strokeWeight:2,fillColor:"#34495e",fillOpacity:.1});return t&&n.maps.event.addListener(i,"click",t),i.setMap(this.gMap),this._zoomToObject(i),i},addStatPoly:function(e,t,i){var r=new n.maps.Polygon({paths:e,strokeColor:"#f1c40f",strokeOpacity:1,strokeWeight:1,fillColor:"#f1c40f",fillOpacity:t,zIndex:100});return i&&n.maps.event.addListener(r,"click",i),r.setMap(this.gMap),this._zoomToObject(r),r},addSearchPoly:function(e,t){var i=new n.maps.Polygon({paths:e,strokeColor:"#ecf0f1",strokeOpacity:0,strokeWeight:4,fillColor:"#ff7675",fillOpacity:.7,zIndex:50});return t&&n.maps.event.addListener(i,"click",t),i.setMap(this.gMap),this._zoomToObject(i),i},addGrid:function(e,t){var i=new n.maps.Polygon({paths:e,strokeColor:"#ecf0f1",strokeOpacity:1,strokeWeight:.5,fillColor:"#81ecec",fillOpacity:.3});return t&&n.maps.event.addListener(i,"click",function(e){t(e)}),i.setMap(this.gMap),i},_zoomToObject:function(e,t){var i=new n.maps.LatLngBounds,r=[];r=void 0!==e?e.getPath().getArray():t;for(var o=0;o<r.length;o++)i.extend(r[o]);null==e&&this.gMap.fitBounds(i)}},e}();r.create=function(e,t){return new r(e,t)},e.Mapster=r}(window,document,google,window.List),function(e,t){var n=function(){function t(e){this.data=[],this.cities=[],this.map=e,this.pol,this.grid=[],this.polyHandler,this.cityIdHolder,this.searchPoly,this.statGrids=[]}return t.prototype={retrieveCities:async function(){this.cities=await(await fetch("/get-all-cities",{method:"post"})).json(),this._fillCities(this,function(){this._setUI()})},_fillCities:async function(e,t){this.data=await(await fetch("/has-city-grid/",{method:"POST"})).json(),t.call(e)},_hasCityGrid:function(e){for(var t=0;t<this.data.length;t++)if(e==this.data[t].city)return!0;return!1},_getGrids:function(e){for(var t=0;t<this.data.length;t++)if(e==this.data[t].city)return this.data[t].size;return"N/A"},_retrievePoly:async function(e,t=!0){var n=await(await fetch("/get-polies/"+e,{method:"POST"})).json();t&&(this.pol&&this.pol.setMap(null),this.pol=this.map.addPoly(n)),this.map._zoomToObject(void 0,n)},_getGridId:function(e){for(var t=0;t<this.data.length;t++)if(e==this.data[t].city)return this.data[t].grid;return null},_retrieveGrid:async function(e){var t=await(await fetch("/get-grids/"+e,{method:"POST"})).json(),n=0;this._emptyGrid();for(var i=new List,r=0;r<t.length;r++){for(var o=new List,a=0;a<t[r].length;a++){var s=new Rect(t[r][a].center,[t[r][a].leftBot,t[r][a].rightBot,t[r][a].rightTop,t[r][a].leftTop],++n);this.grid.push(this.map.addGrid(s.getPath(),function(e){document.querySelector(".search__box").value=e.latLng.lat()+", "+e.latLng.lng(),document.querySelector(".search__btn").click()})),o.add(s)}i.add(o)}this.polyHandler=new PolyHandler(void 0,void 0,void 0,this.pol,void 0,i)},_emptyGrid:function(){this.grid.forEach(function(e){e.setMap(null)})},setupGridGen:function(){var e=this;document.querySelector(".generator__form").onsubmit=async function(t){t.preventDefault();var n=document.querySelector("#selector").value,i=await(await fetch("/insert-city/"+e.cityIdHolder+"/"+n,{method:"POST"})).json();console.log(i),document.querySelector(".generator").classList.remove("generator--show"),e.retrieveCities()}},_setUI:async function(t){var n=this;document.querySelector(".options__content").innerHTML="",this.cities.forEach(function(t){var i=document.createElement("div");i.classList.add("options__item"),i.classList.add("u-text-center");var r=document.createElement("div");r.innerHTML="5555";var o=document.createElement("div");o.innerHTML=t.name;var a=document.createElement("div");a.innerHTML=n._hasCityGrid(t._id)?"<svg class='options__svg'><use xlink:href='#idea' /></svg><p>ACTIVE</p>":"<svg class='options__svg'><use xlink:href='#street-lamp' /></svg>INACTIVE";var s=document.createElement("div");s.innerHTML=n._getGrids(t._id);var c=document.createElement("div"),l=document.createElement("input");l.type="checkbox",l.className="PolyChecker",l.onchange=function(e){if(this.checked){n._retrievePoly(t.polycords);var i=this;document.querySelectorAll(".PolyChecker").forEach(function(e){e!==i&&(e.checked=!1)})}else n.pol.setMap(null)},c.appendChild(l);var d=document.createElement("div"),h=document.createElement("input");if(h.type="checkbox",h.className="GridChecker",n._hasCityGrid(t._id))h.onclick=function(){if(this.checked){for(var e=0;e<n.statGrids.length;e++)n.statGrids[e].setMap(null);n.statGrids=[];var i=this;document.querySelectorAll(".GridChecker").forEach(function(e){e!==i&&(e.checked=!1)}),n.searchPoly&&n.searchPoly.setMap(null),n._retrievePoly(t.polycords,!1),n._retrieveGrid(n._getGridId(t._id)),document.querySelector(".search").style.display="block",document.querySelector(".search form").onsubmit=async function(e){e.preventDefault();var i=document.querySelector(".search__box").value.split(","),r='{"lat":'+i[0]+',"lng":'+i[1]+"}";if(r){var o;try{o=n.polyHandler.findZone(JSON.parse(r))}catch(e){return document.querySelector(".search__define").classList.add("search__define--show"),document.querySelector(".search__define").innerHTML="<h2>NO RESULT FOUND</h2>",document.querySelector(".search__extra__define").classList.remove("search__extra__define--show"),void(n.searchPoly&&n.searchPoly.setMap(null))}var a=[o.leftBot,o.rightBot,o.rightTop,o.leftTop];n.map._zoomToObject(void 0,a),n.searchPoly&&n.searchPoly.setMap(null),n.searchPoly=n.map.addSearchPoly(a),document.querySelector(".search__define").classList.add("search__define--show"),document.querySelector(".search__define").innerHTML="<h2>ZONE #"+o.id+"</h2>",document.querySelector(".search__extra__define").classList.add("search__extra__define--show");var s=document.createElement("canvas");s.className="chart";var c=s.getContext("2d");document.querySelector(".search__extra__define").innerHTML="",document.querySelector(".search__extra__define").appendChild(s);let i=await(await fetch("/zone-stats/"+t._id+"/"+o.id,{method:"POST"})).json();var l=[];if("1"in i)for(var d=1;d<=12;d++)l.push(i[""+d]);else l=[0,0,0,0,0,0,0,0,0,0,0,0];new Chart(c,{type:"bar",data:{labels:["Jan","Feb","Mar","Avr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Users",data:l,backgroundColor:"#f1c40f"}]},options:{}})}else document.querySelector(".search__define").classList.add("search__define--show"),document.querySelector(".search__define").innerHTML="<h2>NO RESULT FOUND</h2>",document.querySelector(".search__extra__define").classList.remove("search__extra__define--show"),n.searchPoly&&n.searchPoly.setMap(null)}}else{for(e=0;e<n.statGrids.length;e++)n.statGrids[e].setMap(null);n.statGrids=[],n._emptyGrid(),document.querySelector(".search__box").value="",n.searchPoly&&n.searchPoly.setMap(null),document.querySelector(".search").style.display="none",document.querySelector(".search__define").classList.remove("search__define--show"),document.querySelector(".search__extra__define").classList.remove("search__extra__define--show")}},d.appendChild(h);else{document.querySelector(".search__box").value="",n.searchPoly&&n.searchPoly.setMap(null);var u=document.createElement("button");u.classList.add("options__btn"),u.innerHTML="Generate Grid",u.onclick=function(){n.cityIdHolder=t._id,document.querySelector(".generator__bg").onclick=function(){document.querySelector(".generator").classList.remove("generator--show")},document.querySelector(".generator").classList.add("generator--show"),document.querySelector("#cityName").innerHTML=t.name,n.setupGridGen()},d.appendChild(u)}var f=document.createElement("div");f.innerHTML='<label for="'+t.name+'"><svg class="options__svg__conf '+t.name+'P"  id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m482 256c0-4.898-.162-9.85-.483-14.791l27.511-25.177-1.59-8.242c-2.012-10.424-4.692-20.819-7.967-30.896-3.273-10.077-7.216-20.063-11.717-29.683l-3.558-7.602-37.041-4.197c-5.266-8.327-11.092-16.334-17.405-23.92l7.46-36.553-6.129-5.732c-7.751-7.248-16.03-14.083-24.607-20.314-8.574-6.23-17.634-11.993-26.926-17.127l-7.347-4.059-32.402 18.36c-9.176-3.664-18.613-6.728-28.194-9.154l-15.427-33.909-8.33-1.033c-10.538-1.308-21.253-1.971-31.848-1.971l-60 90.5 60 90.5c41.421 0 75 33.579 75 75s-33.579 75-75 75l-50 90.5 50 90.5c10.599 0 21.313-.663 31.849-1.972l8.329-1.034 15.427-33.907c9.581-2.427 19.019-5.49 28.194-9.154l32.402 18.36 7.347-4.059c9.292-5.134 18.352-10.896 26.925-17.126 8.578-6.232 16.857-13.067 24.608-20.315l6.129-5.732-7.46-36.553c6.313-7.586 12.14-15.593 17.405-23.92l37.041-4.197 3.558-7.602c4.501-9.619 8.443-19.605 11.716-29.681 3.275-10.079 5.956-20.475 7.968-30.898l1.59-8.241-27.511-25.178c.321-4.942.483-9.892.483-14.791z" fill="#83a3ab"/><path d="m181 256c0-41.421 33.579-75 75-75v-181c-10.595 0-21.31.663-31.848 1.971l-8.33 1.033-15.427 33.909c-9.581 2.427-19.017 5.49-28.194 9.154l-32.402-18.36-7.347 4.059c-9.292 5.134-18.352 10.896-26.925 17.126-8.578 6.232-16.857 13.067-24.608 20.315l-6.129 5.732 7.46 36.553c-6.315 7.588-12.141 15.593-17.405 23.921l-37.041 4.196-3.558 7.602c-4.5 9.616-8.442 19.603-11.717 29.681-3.276 10.082-5.956 20.478-7.967 30.9l-1.59 8.24 27.511 25.177c-.321 4.941-.483 9.893-.483 14.791 0 4.899.162 9.849.483 14.791l-27.51 25.177 1.59 8.24c2.011 10.423 4.69 20.818 7.967 30.899 3.274 10.079 7.217 20.065 11.717 29.682l3.558 7.602 37.041 4.196c5.265 8.328 11.09 16.333 17.405 23.921l-7.46 36.553 6.129 5.732c7.751 7.248 16.03 14.083 24.607 20.314 8.574 6.23 17.634 11.993 26.926 17.127l7.347 4.059 32.402-18.36c9.178 3.664 18.613 6.728 28.194 9.154l15.427 33.907 8.329 1.034c10.535 1.309 21.249 1.972 31.848 1.972v-181c-41.421 0-75-33.579-75-75z" fill="#93b7c0"/><path d="m256 90-40 60.5 40 60.5c24.853 0 45 20.147 45 45s-20.147 45-45 45l-40 60.5 40 60.5c91.679 0 166-74.321 166-166s-74.321-166-166-166z" fill="#667e97"/><path d="m211 256c0-24.853 20.147-45 45-45v-121c-91.679 0-166 74.321-166 166s74.321 166 166 166v-121c-24.853 0-45-20.147-45-45z" fill="#728e95"/></g></svg></label>';var p=document.createElement("input");p.type="checkbox",p.id=t.name,p.classList.add("options__toggle"),p.onchange=function(){e.check(this,t.name+"P")};var m=document.createElement("div");m.classList.add("options__conf"),m.id=t.name+"P";var y=document.createElement("select");y.id=t.name+"-timezone";var _=document.createElement("option");_.value="0",_.innerHTML="ALL YEAR",y.appendChild(_);for(var g=1;g<=12;g++){var v=document.createElement("option");v.value=g,v.innerHTML=g,y.appendChild(v)}var w=document.createElement("div");w.className="time-container";var T=document.createElement("h2");T.innerHTML="Choose Month/Period :",w.appendChild(T),w.appendChild(y);var S=document.createElement("button");S.classList.add("genstat"),S.innerHTML="GENERATE STATISTICS",S.onclick=async function(){(o=new URLSearchParams).append("city",t._id),o.append("month",y.value);let e=await(await fetch("/month-stats",{method:"POST",body:o})).json();if(0==e.total);else{h.checked||h.click();for(var i=0;i<n.statGrids.length;i++)n.statGrids[i].setMap(null);n.statGrids=[];var r=0;for(i=0;i<e.data.length;i++){var o=e.data[i];r=o.counter>r?o.counter:r}e.data.forEach(function(e){for(var i=[],o=e.counter/r,a=0;a<e.rect.length;a++)i.push({lat:e.rect[a][0],lng:e.rect[a][1]});n._retrievePoly(t.polycords,!1),n.statGrids.push(n.map.addStatPoly(i,o,function(e){document.querySelector(".search").style.display="block",document.querySelector(".search__box").value=e.latLng.lat()+", "+e.latLng.lng(),document.querySelector(".search__btn").click()}))})}},m.appendChild(w),m.appendChild(S),i.appendChild(r),i.appendChild(o),i.appendChild(a),i.appendChild(s),i.appendChild(c),i.appendChild(d),i.appendChild(f);var L=document.querySelector(".options__content");L.appendChild(i),L.appendChild(p),L.appendChild(m)})}},t}();n.create=function(e){return new n(e)},e.MainController=n}(window,document)(function(e,t,n){var i={center:{lat:33.5803154,lng:-7.6036127},zoom:12,disableDefaultUI:!0,styles:e.mapStyle1},r=document.querySelector(".map"),o=n.create(r,i);MainController.create(o).retrieveCities();e.showPosition=function(e){},navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition),check=function(e,t){var n=document.querySelector("#"+t),i=document.querySelector("."+t);n.classList.contains("options__conf--show")?(n.classList.remove("options__conf--show"),i.classList.remove("options__svg__conf--show")):(n.classList.add("options__conf--show"),i.classList.add("options__svg__conf--show"))},o.gMap.setZoom(13),setupOptionsUI=function(){var e=document.querySelector(".user-selector"),t=document.querySelector(".key-selector"),n=document.querySelector(".user__opts"),i=document.querySelector(".key__opts");e.onho,e.onclick=function(){n.classList.contains("container__options__content--selected")?(n.classList.remove("container__options__content--selected"),e.classList.remove("container__options-item--selected")):(n.classList.add("container__options__content--selected"),e.classList.add("container__options-item--selected"),i.classList.remove("container__options__content--selected"),t.classList.remove("container__options-item--selected"))},t.onclick=function(){i.classList.contains("container__options__content--selected")?(i.classList.remove("container__options__content--selected"),t.classList.remove("container__options-item--selected")):(i.classList.add("container__options__content--selected"),t.classList.add("container__options-item--selected"),n.classList.remove("container__options__content--selected"),e.classList.remove("container__options-item--selected"))},document.querySelector(".key__opts form").onsubmit=async function(e){e.preventDefault();var t=await(await fetch("/gen-key",{method:"POST"})).text(),n=document.createElement("div");n.className="key","Only Three keys allowed per user"!=t?(n.innerHTML=t,document.querySelector(".key__opts-key").append(n)):document.querySelector(".error-key").innerHTML=t}},document.querySelector(".user__opts form").onsubmit=async function(e){e.preventDefault();var t=new URLSearchParams;t.append("email",document.querySelector("#lEmail").value),t.append("password",document.querySelector("#lPassword").value),t.append("phone",document.querySelector("#phone").value);var n=await(await fetch("/update",{method:"POST",body:t})).text();document.querySelector(".sucerr").innerHTML=n},setupOptionsUI()})(window,document,window.Mapster||(window.Mapster={}));